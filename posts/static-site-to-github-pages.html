<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="shortcut icon" href="/portfolio/favicon.ico"/><title>How to deploy a static Next.js website on Github Pages</title><meta name="description" content="In this post I go through the steps to deploy my Portfolio-Blog developed with Next.js on Github. By the end of it you will be able to automate the deployment by each new commit to the repository."/><meta name="next-head-count" content="5"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerPolicy="no-referrer"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/portfolio/_next/static/css/4ef3324b0ca4f2e6.css" as="style"/><link rel="stylesheet" href="/portfolio/_next/static/css/4ef3324b0ca4f2e6.css" data-n-g=""/><link rel="preload" href="/portfolio/_next/static/css/8d0af738d28131f3.css" as="style"/><link rel="stylesheet" href="/portfolio/_next/static/css/8d0af738d28131f3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/portfolio/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/portfolio/_next/static/chunks/webpack-f10e1d74334e5489.js" defer=""></script><script src="/portfolio/_next/static/chunks/framework-75db3117d1377048.js" defer=""></script><script src="/portfolio/_next/static/chunks/main-995bb50545027da3.js" defer=""></script><script src="/portfolio/_next/static/chunks/pages/_app-1d022ad8011e1e6a.js" defer=""></script><script src="/portfolio/_next/static/chunks/716-88c1138b6c480ab9.js" defer=""></script><script src="/portfolio/_next/static/chunks/pages/posts/%5Bslug%5D-90f1b0c0ff5d9dcf.js" defer=""></script><script src="/portfolio/_next/static/uj4BmJhjN_BgBFLctQRDF/_buildManifest.js" defer=""></script><script src="/portfolio/_next/static/uj4BmJhjN_BgBFLctQRDF/_ssgManifest.js" defer=""></script><script src="/portfolio/_next/static/uj4BmJhjN_BgBFLctQRDF/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Poppins&display=swap">@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sFVQ.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJV37MOzlojwUKaJO.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVT7MOzlojwUKaJO.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVz7MOzlojwUKaJO.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVP7MOzlojwUKaJO.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJV77MOzlojwUKaJO.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7MOzlojwUKQ.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="app" data-theme="dark"><div class="navbar_navbar__LVObF "><div class="navbar_container__RaknJ"><a class="navbar_logo__UErdh" href="/portfolio">.</a><nav class="navbar_navMenu___hRqD" id="navMenu"><div class="navbar_linkWrapper__Tf745"><a style="cursor:pointer;opacity:0;transform:translateY(-30px) translateZ(0)">Projects</a><a style="cursor:pointer;opacity:0;transform:translateY(-30px) translateZ(0)">Blog</a><a style="cursor:pointer;opacity:0;transform:translateY(-30px) translateZ(0)">About me</a></div></nav><div class="navbar_navContainer__1x0xH"><button class="navbar_icon__LC6_z" style="opacity:0;transform:translateY(-30px) translateZ(0)"><i class="fa fa-envelope"></i></button><button class="navbar_icon__LC6_z" style="opacity:0;transform:translateY(-30px) translateZ(0)"><i class="fa fa-sun" style="opacity:1;transform:none"></i></button><div class="navbar_iconMain__bk69K"><button class="navbar_icon__LC6_z navbar_iconMain__bk69K"><svg width="45" height="45" viewBox="0 0 23 23"><path fill="transparent" stroke-width="3" stroke="hsl(0, 0%, 18%)" stroke-linecap="round" d="M 2 2.5 L 20 2.5"></path><path fill="transparent" stroke-width="3" stroke="hsl(0, 0%, 18%)" stroke-linecap="round" d="M 2 9.423 L 20 9.423" opacity="1"></path><path fill="transparent" stroke-width="3" stroke="hsl(0, 0%, 18%)" stroke-linecap="round" d="M 2 16.346 L 20 16.346"></path></svg></button></div></div></div></div><main><div class="postContent_postContent__l0RMZ"><div class="postContent_container__SnuIF"><article><h1>How to deploy a static Next.js website on Github Pages<!-- --></h1>
<!-- --><p><img src="/portfolio/images/posts/static-site-to-github-pages/github.jpg" alt="Image ..."/></p>
<!-- --><h5>Using Next.js version 12.1.6<!-- --></h5>
<!-- --><h5>2022-06-23<!-- --></h5>
<!-- --><p>Update: Since July 27th, this procedure can be done completely by github without a third party solution. <!-- --><a href="https://github.blog/changelog/2022-07-27-github-pages-custom-github-actions-workflows-beta/">github.blog<!-- --></a></p>
<!-- --><h2>Introduction<!-- --></h2>
<!-- --><p>I&#x27;ve wanted to build a cool, or at least presentable, Portfolio-Blog for a while now. Since I&#x27;ve been working a lot with Next.js lately, I figured it would be a great idea to build this portfolio using Next.js instead of some plain html/css/js. And since I didn&#x27;t want to pay for hosting just right now, Github Pages should do the trick.<!-- --></p>
<!-- --><p>The original idea was to <!-- --><strong>next build<!-- --></strong> and <!-- --><strong>next export<!-- --></strong> the project and then manually upload the generated files to a repository. Since this didn&#x27;t work the way I was thinking, I searched and found an even better solution. This involves using Github Actions and a third party CI/CD solution available at Github Marketplace. The one I used is <!-- --><a href="https://github.com/marketplace/actions/deploy-to-github-pages">&quot;Deploy to Github Pages&quot;<!-- --></a>.<!-- --></p>
<!-- --><h3>1. Github Actions<!-- --></h3>
<!-- --><ol>
<!-- --><li>
<!-- --><p>In your repository go to actions and add a workflow by choosing Node.js:<!-- --></p>
<!-- --><p><img src="/portfolio/images/posts/static-site-to-github-pages/github-actions-01.jpg" alt="Image ..."/></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>You&#x27;ll get a <!-- --><strong>node.js.yml<!-- --></strong> file like the one bellow:<!-- --></p>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-yml" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span class="token" style="color:#7C7C7C"># This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span><span></span><span class="token" style="color:#7C7C7C"># For more information see: https://help.github.com/actions/language-and-framework-guides/using-nodejs-with-github-actions<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span><span></span><span class="token key" style="color:#F9EE98">name<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> Node.js CI
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6<!-- --></span><span></span><span class="token key" style="color:#F9EE98">on<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">push<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#F9EE98">branches<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#c5c8c6">[<!-- --></span><span class="token" style="color:#A8FF60">&#x27;main&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">]<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">pull_request<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#F9EE98">branches<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#c5c8c6">[<!-- --></span><span class="token" style="color:#A8FF60">&#x27;main&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">]<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">jobs<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">build<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">14<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">15<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">runs-on<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> ubuntu<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>latest
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">16<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">17<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">strategy<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">18<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#F9EE98">matrix<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">19<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#F9EE98">node-version<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#c5c8c6">[<!-- --></span><span>12.x<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span> 14.x<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span> 16.x<!-- --></span><span class="token" style="color:#c5c8c6">]<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">20<!-- --></span><span>      <!-- --></span><span class="token" style="color:#7C7C7C"># See supported Node.js release schedule at https://nodejs.org/en/about/releases/<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">21<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">22<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">steps<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">23<!-- --></span><span>    <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">uses<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> actions/checkout@v3
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">24<!-- --></span><span>    <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">name<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> Use Node.js $<!-- --></span><span class="token" style="color:#c5c8c6">{<!-- --></span><span class="token" style="color:#c5c8c6">{<!-- --></span><span> matrix.node<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>version <!-- --></span><span class="token" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#c5c8c6">}<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">25<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#F9EE98">uses<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> actions/setup<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>node@v3
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">26<!-- --></span><span>      <!-- --></span><span class="token key" style="color:#F9EE98">with<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">27<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#F9EE98">node-version<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> $<!-- --></span><span class="token" style="color:#c5c8c6">{<!-- --></span><span class="token" style="color:#c5c8c6">{<!-- --></span><span> matrix.node<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>version <!-- --></span><span class="token" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#c5c8c6">}<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">28<!-- --></span><span>        <!-- --></span><span class="token key" style="color:#F9EE98">cache<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;npm&#x27;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">29<!-- --></span><span>    <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> npm ci
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">30<!-- --></span><span>    <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> npm run build <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>if<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>present
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">31<!-- --></span><span>    <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> npm test
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">32<!-- --></span></code></pre></pre>
<!-- --></li>
<!-- --><li>
<!-- --><p>Select the node version e.g. <!-- --><strong>node-version: [16.x]<!-- --></strong> then start replacing at <!-- --><strong>- run: npm ci<!-- --></strong> like the code below. Since I&#x27;m using <!-- --><strong>yarn<!-- --></strong> I also changed the respective <!-- --><strong>npm<!-- --></strong> commands. For example: <!-- --><strong>run: yarn install --frozen-lockfile<!-- --></strong> is equivalent to <!-- --><strong>run: npm ci<!-- --></strong>.<!-- --></p>
<!-- --><p>We also need to bypass Jekyll since it doesn&#x27;t recognize folders that start with an underscore, like &quot;_next&quot;. More about bypassing Jekyll on Github <!-- --><a href="https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/">Github Blog<!-- --></a> and <!-- --><a href="https://stackoverflow.com/questions/61450307/js-and-css-not-loading-when-hosting-next-application-on-github-pages">Stackoverflow<!-- --></a>.<!-- --></p>
<!-- --><p>The section starting with <!-- --><strong>- name: Deploy<!-- --></strong> is the <!-- --><a href="https://github.com/marketplace/actions/deploy-to-github-pages">&quot;Deploy to Github Pages&quot;<!-- --></a>.<!-- --></p>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-yml" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> npm install <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>g yarn <!-- --></span><span class="token" style="color:#7C7C7C"># Installs yarn.<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span><span></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> yarn install <!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>frozen<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>lockfile <!-- --></span><span class="token" style="color:#7C7C7C"># Performs a clean install.<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span><span></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> yarn build <!-- --></span><span class="token" style="color:#fd971f;font-weight:bold">&amp;&amp;<!-- --></span><span> export <!-- --></span><span class="token" style="color:#7C7C7C"># Generates and exports files into &quot;out&quot; folder.<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span><span></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">run<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> touch ./out/.nojekyll <!-- --></span><span class="token" style="color:#7C7C7C"># This bypasses Github&#x27;s Jekyll since it doesn&#x27;t recognize folders that start with an underscore, like &quot;_next&quot;.<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6<!-- --></span><span></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span> <!-- --></span><span class="token key" style="color:#F9EE98">name<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> Deploy
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">uses<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> JamesIves/github<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>pages<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>deploy<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>action@v4.3.3
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8<!-- --></span><span>  <!-- --></span><span class="token key" style="color:#F9EE98">with<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#F9EE98">branch<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> gh<!-- --></span><span class="token" style="color:#c5c8c6">-<!-- --></span><span>pages <!-- --></span><span class="token" style="color:#7C7C7C"># The branch the action should deploy to.<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10<!-- --></span><span>    <!-- --></span><span class="token key" style="color:#F9EE98">folder<!-- --></span><span class="token" style="color:#c5c8c6">:<!-- --></span><span> out <!-- --></span><span class="token" style="color:#7C7C7C"># The folder the action should deploy.<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11<!-- --></span></code></pre></pre>
<!-- --></li>
<!-- --><li>
<!-- --><p>The content of the folder <!-- --><strong>out<!-- --></strong> is then deployed to the <!-- --><strong>gh-pages<!-- --></strong> branch, which is then used by Github Pages.<!-- --></p>
<!-- --></li>
<!-- --></ol>
<!-- --><h3>2. Next.js config<!-- --></h3>
<!-- --><h4>- Custom image loader &amp; basePath<!-- --></h4>
<!-- --><ol>
<!-- --><li>
<!-- --><p>In the Next.js application, we need to change the <!-- --><strong>next.config.js<!-- --></strong> file. We need to add a custom image loader since the standard one doesn&#x27;t support <!-- --><strong>next export<!-- --></strong> which you can see in the error message bellow. More about built-in image loaders <!-- --><a href="https://nextjs.org/docs/api-reference/next/image#loader-configuration">official doc<!-- --></a>. This was a trial and error and the one that worked for me was the &quot;akamai&quot;.<!-- --></p>
<!-- --><p>Error message:<!-- --></p>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-txt" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span>Error: Image Optimization using Next.js&#x27; default loader is not compatible with `next export`.
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span>  Possible solutions:
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span>    - Use `next start` to run a server, which includes the Image Optimization API.
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span>    - Use any provider which supports Image Optimization (like Vercel).
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5<!-- --></span>    - Configure a third-party loader in `next.config.js`.
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6<!-- --></span>    - Use the `loader` prop for `next/image`.
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7<!-- --></span>  Read more: https://nextjs.org/docs/messages/export-image-api
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8<!-- --></span></code></pre></pre>
<!-- --><p>next.config.js:<!-- --></p>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-js" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span class="token doc-comment" style="color:#7C7C7C">/** <!-- --></span><span class="token doc-comment" style="color:#96CBFE">@type<!-- --></span><span class="token doc-comment" style="color:#7C7C7C"> <!-- --></span><span class="token doc-comment" style="color:#c5c8c6;text-decoration:underline">{<!-- --></span><span class="token doc-comment module" style="color:#96CBFE;text-decoration:underline">import<!-- --></span><span class="token doc-comment" style="color:#c5c8c6;text-decoration:underline">(<!-- --></span><span class="token doc-comment" style="color:#A8FF60;text-decoration:underline">&#x27;next&#x27;<!-- --></span><span class="token doc-comment" style="color:#c5c8c6;text-decoration:underline">)<!-- --></span><span class="token doc-comment" style="color:#c5c8c6;text-decoration:underline">.<!-- --></span><span class="token doc-comment" style="color:#FFFFB6;text-decoration:underline">NextConfig<!-- --></span><span class="token doc-comment" style="color:#c5c8c6;text-decoration:underline">}<!-- --></span><span class="token doc-comment" style="color:#7C7C7C"> */<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span><span></span><span class="token" style="color:#96CBFE">const<!-- --></span><span> isProd <!-- --></span><span class="token" style="color:#EDEDED">=<!-- --></span><span> process<!-- --></span><span class="token" style="color:#c5c8c6">.<!-- --></span><span class="token property-access">env<!-- --></span><span class="token" style="color:#c5c8c6">.<!-- --></span><span class="token" style="color:#99CC99">NODE_ENV<!-- --></span><span> <!-- --></span><span class="token" style="color:#EDEDED">===<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;production&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span><span></span><span class="token" style="color:#96CBFE">const<!-- --></span><span> nextConfig <!-- --></span><span class="token" style="color:#EDEDED">=<!-- --></span><span> <!-- --></span><span class="token" style="color:#c5c8c6">{<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span><span>  <!-- --></span><span class="token literal-property" style="color:#96CBFE">reactStrictMode<!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#99CC99">true<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5<!-- --></span><span>  <!-- --></span><span class="token literal-property" style="color:#96CBFE">images<!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#c5c8c6">{<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6<!-- --></span><span>    <!-- --></span><span class="token literal-property" style="color:#96CBFE">loader<!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;akamai&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7<!-- --></span><span>    <!-- --></span><span class="token literal-property" style="color:#96CBFE">path<!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> isProd <!-- --></span><span class="token" style="color:#EDEDED">?<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;https://&lt;your github account&gt;.github.io/&#x27;<!-- --></span><span> <!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">8<!-- --></span><span>  <!-- --></span><span class="token" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">9<!-- --></span><span>  <!-- --></span><span class="token literal-property" style="color:#96CBFE">basePath<!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;/&lt;your github repo&gt;&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">10<!-- --></span><span></span><span class="token" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#c5c8c6">;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">11<!-- --></span>
<!-- --><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">12<!-- --></span><span>module<!-- --></span><span class="token" style="color:#c5c8c6">.<!-- --></span><span class="token property-access">exports<!-- --></span><span> <!-- --></span><span class="token" style="color:#EDEDED">=<!-- --></span><span> nextConfig<!-- --></span><span class="token" style="color:#c5c8c6">;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">13<!-- --></span></code></pre></pre>
<!-- --></li>
<!-- --><li>
<!-- --><p>As seen above, you also need to define a <!-- --><strong>basePath<!-- --></strong>. The reason behind it is that images/assets will not load because your repository name will be part of the URL. There is another option called <!-- --><a href="https://nextjs.org/docs/api-reference/next.config.js/cdn-support-with-asset-prefix">assetPrefix<!-- --></a> but it is discouraged. By the way you can also use a <!-- --><strong>isProduction<!-- --></strong> variable like this:<!-- --></p>
<!-- --><p>next.config.js:<!-- --></p>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-js" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span class="token" style="color:#96CBFE">const<!-- --></span><span> isProd <!-- --></span><span class="token" style="color:#EDEDED">=<!-- --></span><span> process<!-- --></span><span class="token" style="color:#c5c8c6">.<!-- --></span><span class="token property-access">env<!-- --></span><span class="token" style="color:#c5c8c6">.<!-- --></span><span class="token" style="color:#99CC99">NODE_ENV<!-- --></span><span> <!-- --></span><span class="token" style="color:#EDEDED">===<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;production&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span><span></span><span class="token" style="color:#7C7C7C">//and then something like this ternary :<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span><span></span><span class="token literal-property" style="color:#96CBFE">basePath<!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> isProd <!-- --></span><span class="token" style="color:#EDEDED">?<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;/&lt;your github repo&gt;&#x27;<!-- --></span><span> <!-- --></span><span class="token" style="color:#EDEDED">:<!-- --></span><span> <!-- --></span><span class="token" style="color:#A8FF60">&#x27;&#x27;<!-- --></span><span class="token" style="color:#c5c8c6">,<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span></code></pre></pre>
<!-- --></li>
<!-- --></ol>
<!-- --><h4>- Changing Image src<!-- --></h4>
<!-- --><ol>
<!-- --><li>
<!-- --><p>Replace each image src as described in the <!-- --><a href="https://nextjs.org/docs/api-reference/next.config.js/basepath#images">official docs<!-- --></a></p>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-jsx" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span class="token" style="color:#c5c8c6">&lt;<!-- --></span><span class="token" style="color:#FFFFB6;text-decoration:underline">Image<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">src<!-- --></span><span class="token attr-equals" style="color:#c5c8c6">=<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#F9EE98">/images/profile-pic.png<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">width<!-- --></span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">{<!-- --></span><span class="token script language-javascript" style="color:#FF73FD">360<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">height<!-- --></span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">{<!-- --></span><span class="token script language-javascript" style="color:#FF73FD">360<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">alt<!-- --></span><span class="token attr-equals" style="color:#c5c8c6">=<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#F9EE98">profile-pic<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6<!-- --></span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#c5c8c6">/&gt;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7<!-- --></span></code></pre></pre>
<!-- --><pre><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code class="language-jsx" style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">1<!-- --></span><span class="token" style="color:#c5c8c6">&lt;<!-- --></span><span class="token" style="color:#FFFFB6;text-decoration:underline">Image<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">2<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">src<!-- --></span><span class="token attr-equals" style="color:#c5c8c6">=<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#F9EE98">/&lt;your github repo&gt;/images/profile-pic.png<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">3<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">width<!-- --></span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">{<!-- --></span><span class="token script language-javascript" style="color:#FF73FD">360<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">4<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">height<!-- --></span><span class="token script language-javascript script-punctuation" style="color:#96CBFE">=<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">{<!-- --></span><span class="token script language-javascript" style="color:#FF73FD">360<!-- --></span><span class="token script language-javascript" style="color:#c5c8c6">}<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">5<!-- --></span><span class="token" style="color:#96CBFE">  <!-- --></span><span class="token" style="color:#A8FF60">alt<!-- --></span><span class="token attr-equals" style="color:#c5c8c6">=<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#F9EE98">profile-pic<!-- --></span><span class="token" style="color:#c5c8c6">&#x27;<!-- --></span><span class="token" style="color:#96CBFE">
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">6<!-- --></span><span class="token" style="color:#96CBFE"></span><span class="token" style="color:#c5c8c6">/&gt;<!-- --></span><span>
<!-- --></span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none;color:#7C7C7C">7<!-- --></span></code></pre></pre>
<!-- --></li>
<!-- --></ol>
<!-- --><p>Thanks for following until here and I hope it helps you too!<!-- --></p></article></div></div><footer class="footer_footer__zsYAi"><div class="footer_socialMedia__hzLZE"><a href="https://github.com/renebitter" target="_blank" rel="noreferrer"><i class="fab fa-github"></i></a><a href="https://www.linkedin.com/in/rene-bitter/" target="_blank" rel="noreferrer"><i class="fab fa-linkedin"></i></a></div><div>© Rene Bitter</div><small>Icons used from<!-- --> <!-- --><a href="https://www.flaticon.com/" target="_blank" rel="noreferrer">Flaticon</a> <!-- -->&amp;<!-- --> <!-- --><a href="https://fontawesome.com/" target="_blank" rel="noreferrer">Font Awesome</a></small></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"static-site-to-github-pages","title":"How to deploy a static Next.js website on Github Pages","date":"2022-06-23","image":"github-01.png","excerpt":"In this post I go through the steps to deploy my Portfolio-Blog developed with Next.js on Github. By the end of it you will be able to automate the deployment by each new commit to the repository.","isFeatured":true,"tech":["Next.js"],"content":"\n# How to deploy a static Next.js website on Github Pages\n\n![Image ...](/portfolio/images/posts/static-site-to-github-pages/github.jpg)\n\n##### Using Next.js version 12.1.6\n\n##### 2022-06-23\n\nUpdate: Since July 27th, this procedure can be done completely by github without a third party solution. [github.blog](https://github.blog/changelog/2022-07-27-github-pages-custom-github-actions-workflows-beta/)\n\n## Introduction\n\nI've wanted to build a cool, or at least presentable, Portfolio-Blog for a while now. Since I've been working a lot with Next.js lately, I figured it would be a great idea to build this portfolio using Next.js instead of some plain html/css/js. And since I didn't want to pay for hosting just right now, Github Pages should do the trick.\n\nThe original idea was to **next build** and **next export** the project and then manually upload the generated files to a repository. Since this didn't work the way I was thinking, I searched and found an even better solution. This involves using Github Actions and a third party CI/CD solution available at Github Marketplace. The one I used is [\"Deploy to Github Pages\"](https://github.com/marketplace/actions/deploy-to-github-pages).\n\n### 1. Github Actions\n\n1. In your repository go to actions and add a workflow by choosing Node.js:\n\n   ![Image ...](/portfolio/images/posts/static-site-to-github-pages/github-actions-01.jpg)\n\n2. You'll get a **node.js.yml** file like the one bellow:\n\n   ```yml\n   # This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node\n   # For more information see: https://help.github.com/actions/language-and-framework-guides/using-nodejs-with-github-actions\n\n   name: Node.js CI\n\n   on:\n     push:\n       branches: ['main']\n     pull_request:\n       branches: ['main']\n\n     jobs:\n     build:\n\n     runs-on: ubuntu-latest\n\n     strategy:\n       matrix:\n         node-version: [12.x, 14.x, 16.x]\n         # See supported Node.js release schedule at https://nodejs.org/en/about/releases/\n\n     steps:\n       - uses: actions/checkout@v3\n       - name: Use Node.js ${{ matrix.node-version }}\n         uses: actions/setup-node@v3\n         with:\n           node-version: ${{ matrix.node-version }}\n           cache: 'npm'\n       - run: npm ci\n       - run: npm run build --if-present\n       - run: npm test\n   ```\n\n3. Select the node version e.g. **node-version: [16.x]** then start replacing at **- run: npm ci** like the code below. Since I'm using **yarn** I also changed the respective **npm** commands. For example: **run: yarn install --frozen-lockfile** is equivalent to **run: npm ci**.\n\n   We also need to bypass Jekyll since it doesn't recognize folders that start with an underscore, like \"\\_next\". More about bypassing Jekyll on Github [Github Blog](https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/) and [Stackoverflow](https://stackoverflow.com/questions/61450307/js-and-css-not-loading-when-hosting-next-application-on-github-pages).\n\n   The section starting with **- name: Deploy** is the [\"Deploy to Github Pages\"](https://github.com/marketplace/actions/deploy-to-github-pages).\n\n   ```yml\n   - run: npm install -g yarn # Installs yarn.\n   - run: yarn install --frozen-lockfile # Performs a clean install.\n   - run: yarn build \u0026\u0026 export # Generates and exports files into \"out\" folder.\n   - run: touch ./out/.nojekyll # This bypasses Github's Jekyll since it doesn't recognize folders that start with an underscore, like \"_next\".\n\n   - name: Deploy\n     uses: JamesIves/github-pages-deploy-action@v4.3.3\n     with:\n       branch: gh-pages # The branch the action should deploy to.\n       folder: out # The folder the action should deploy.\n   ```\n\n4. The content of the folder **out** is then deployed to the **gh-pages** branch, which is then used by Github Pages.\n\n### 2. Next.js config\n\n#### - Custom image loader \u0026 basePath\n\n1. In the Next.js application, we need to change the **next.config.js** file. We need to add a custom image loader since the standard one doesn't support **next export** which you can see in the error message bellow. More about built-in image loaders [official doc](https://nextjs.org/docs/api-reference/next/image#loader-configuration). This was a trial and error and the one that worked for me was the \"akamai\".\n\n   Error message:\n\n   ```txt\n   Error: Image Optimization using Next.js' default loader is not compatible with `next export`.\n     Possible solutions:\n       - Use `next start` to run a server, which includes the Image Optimization API.\n       - Use any provider which supports Image Optimization (like Vercel).\n       - Configure a third-party loader in `next.config.js`.\n       - Use the `loader` prop for `next/image`.\n     Read more: https://nextjs.org/docs/messages/export-image-api\n   ```\n\n   next.config.js:\n\n   ```js\n   /** @type {import('next').NextConfig} */\n   const isProd = process.env.NODE_ENV === 'production';\n   const nextConfig = {\n     reactStrictMode: true,\n     images: {\n       loader: 'akamai',\n       path: isProd ? 'https://\u003cyour github account\u003e.github.io/' : '',\n     },\n     basePath: '/\u003cyour github repo\u003e',\n   };\n\n   module.exports = nextConfig;\n   ```\n\n2. As seen above, you also need to define a **basePath**. The reason behind it is that images/assets will not load because your repository name will be part of the URL. There is another option called [assetPrefix](https://nextjs.org/docs/api-reference/next.config.js/cdn-support-with-asset-prefix) but it is discouraged. By the way you can also use a **isProduction** variable like this:\n\n   next.config.js:\n\n   ```js\n   const isProd = process.env.NODE_ENV === 'production';\n   //and then something like this ternary :\n   basePath: isProd ? '/\u003cyour github repo\u003e' : '',\n   ```\n\n#### - Changing Image src\n\n1. Replace each image src as described in the [official docs](https://nextjs.org/docs/api-reference/next.config.js/basepath#images)\n\n   ```jsx\n   \u003cImage\n     src='/images/profile-pic.png'\n     width={360}\n     height={360}\n     alt='profile-pic'\n   /\u003e\n   ```\n\n   ```jsx\n   \u003cImage\n     src='/\u003cyour github repo\u003e/images/profile-pic.png'\n     width={360}\n     height={360}\n     alt='profile-pic'\n   /\u003e\n   ```\n\nThanks for following until here and I hope it helps you too!\n"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"static-site-to-github-pages"},"buildId":"uj4BmJhjN_BgBFLctQRDF","assetPrefix":"/portfolio","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>