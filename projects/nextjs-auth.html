<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="shortcut icon" href="/portfolio/favicon.ico"/><title>Project - Next.js Authentication</title><meta name="description" content="Next.js project using next-auth library and JWT to handle authentication."/><meta name="next-head-count" content="5"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerPolicy="no-referrer"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/portfolio/_next/static/css/4ef3324b0ca4f2e6.css" as="style"/><link rel="stylesheet" href="/portfolio/_next/static/css/4ef3324b0ca4f2e6.css" data-n-g=""/><link rel="preload" href="/portfolio/_next/static/css/034f1c775601f1c6.css" as="style"/><link rel="stylesheet" href="/portfolio/_next/static/css/034f1c775601f1c6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/portfolio/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/portfolio/_next/static/chunks/webpack-f10e1d74334e5489.js" defer=""></script><script src="/portfolio/_next/static/chunks/framework-75db3117d1377048.js" defer=""></script><script src="/portfolio/_next/static/chunks/main-2751f1bd599247c5.js" defer=""></script><script src="/portfolio/_next/static/chunks/pages/_app-1d022ad8011e1e6a.js" defer=""></script><script src="/portfolio/_next/static/chunks/675-b02758ece178bbe8.js" defer=""></script><script src="/portfolio/_next/static/chunks/716-88c1138b6c480ab9.js" defer=""></script><script src="/portfolio/_next/static/chunks/854-f6c15d4fc34ab343.js" defer=""></script><script src="/portfolio/_next/static/chunks/828-52e66a691e53e6f3.js" defer=""></script><script src="/portfolio/_next/static/chunks/pages/projects/%5Bslug%5D-84e1f98fc4c4d092.js" defer=""></script><script src="/portfolio/_next/static/hbUhD9yAYEdJSnufkLk56/_buildManifest.js" defer=""></script><script src="/portfolio/_next/static/hbUhD9yAYEdJSnufkLk56/_ssgManifest.js" defer=""></script><script src="/portfolio/_next/static/hbUhD9yAYEdJSnufkLk56/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Poppins&display=swap">@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sFVQ.woff) format('woff')}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrFJM.woff) format('woff')}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJV37MOzlojwUKaJO.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVT7MOzlojwUKaJO.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVz7MOzlojwUKaJO.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVP7MOzlojwUKaJO.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJV77MOzlojwUKaJO.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Fira Code';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/firacode/v21/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7MOzlojwUKQ.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJbecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJnecnFHGPezSQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Poppins';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="app" data-theme="dark"><div class="navbar_navbar__LVObF "><div class="navbar_container__RaknJ"><a class="navbar_logo__UErdh" href="/portfolio">.</a><nav class="navbar_navMenu___hRqD" id="navMenu"><div class="navbar_linkWrapper__Tf745"><a style="cursor:pointer;opacity:0;transform:translateY(-30px) translateZ(0)">Projects</a><a style="cursor:pointer;opacity:0;transform:translateY(-30px) translateZ(0)">Blog</a><a style="cursor:pointer;opacity:0;transform:translateY(-30px) translateZ(0)">About me</a></div></nav><div class="navbar_navContainer__1x0xH"><button class="navbar_icon__LC6_z" style="opacity:0;transform:translateY(-30px) translateZ(0)"><i class="fa fa-envelope"></i></button><button class="navbar_icon__LC6_z" style="opacity:0;transform:translateY(-30px) translateZ(0)"><i class="fa fa-sun" style="opacity:1;transform:none"></i></button><div class="navbar_iconMain__bk69K"><button class="navbar_icon__LC6_z navbar_iconMain__bk69K"><svg width="45" height="45" viewBox="0 0 23 23"><path fill="transparent" stroke-width="3" stroke="hsl(0, 0%, 18%)" stroke-linecap="round" d="M 2 2.5 L 20 2.5"></path><path fill="transparent" stroke-width="3" stroke="hsl(0, 0%, 18%)" stroke-linecap="round" d="M 2 9.423 L 20 9.423" opacity="1"></path><path fill="transparent" stroke-width="3" stroke="hsl(0, 0%, 18%)" stroke-linecap="round" d="M 2 16.346 L 20 16.346"></path></svg></button></div></div></div></div><main><div class="projectContent_projectDetail__YW6o_"><div class="container section mvh-100 projectDetail"><button class="btn btn-filled">View All Projects</button><div class="projectContent_card__n1tc0"><div class="projectContent_projectLinks__atmgO"><a href="https://github.com/renebitter/nextjs-authentication" target="_blank" rel="noreferrer"><i class="fab fa-github"></i>Github<!-- --></a><a href="https://nextjs-authentication-eight.vercel.app/" target="_blank" rel="noreferrer"><i class="fas fa-link"></i>Website<!-- --></a></div><h1>Next.js Authentication</h1><small>React, Next.js</small><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27500%27%20height=%27360%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://iamsalmandev.vercel.app/../../portfolio/images/projects/nextjs-auth.png?imwidth=640 1x, https://iamsalmandev.vercel.app/../../portfolio/images/projects/nextjs-auth.png?imwidth=1080 2x" src="https://iamsalmandev.vercel.app/../../portfolio/images/projects/nextjs-auth.png?imwidth=1080" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><h2>Description<!-- --></h2>
<!-- --><p>Project built using next-auth library to handle authentication.<!-- --></p>
<!-- --><ul>
<!-- --><li>SessionProvider<!-- --></li>
<!-- --><li>useSession<!-- --></li>
<!-- --><li>getSession<!-- --></li>
<!-- --><li>CredentialsProvider<!-- --></li>
<!-- --><li>JWT &amp; bcryptjs (for password hashing)<!-- --></li>
<!-- --><li>Mongodb<!-- --></li>
<!-- --><li>HTTP requests sent using fetch<!-- --></li>
<!-- --></ul>
<!-- --><h3>Next-auth:<!-- --></h3>
<!-- --><ul>
<!-- --><li>
<!-- --><p>&#x27;SessionProvider&#x27;
Contains the &#x27;session context&#x27; and is exposed at the top level of the application &#x27;_app.js&#x27;.
&#x27;SessionProvider session={pageProps.session}&#x27; This will skip the &#x27;session http request&#x27; on &#x27;profile.js&#x27; since it&#x27;s provided by &#x27;getServerSideProps(context)&#x27; on &#x27;profile.js&#x27;.
&#x27;auth.js&#x27; will send this &#x27;session http request&#x27; since it does not have a &#x27;getServerSideProps(context)&#x27;.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;useSession()&#x27;
Frontend - Add React Hook. Checks if someone is signed in. Used in &#x27;main-navigation.js&#x27; component.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;getSession()&#x27;
Backend - Used to protect the API Route.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;CredentialsProvider&#x27;
Manages token creation behind the scenes, &#x27;JWT&#x27; (JSON Web Token), used in &#x27;/api/auth/[...nextauth]&#x27;.
Needs to be a &#x27;catch all route&#x27; because &#x27;next-auth&#x27; exposes multiple routes for login, logout and others more.<!-- --></p>
<!-- --><p><sup><em>List of &#x27;next-auth&#x27; exposed routes (<!-- --><strong>that should not be overwritten by your custom ones<!-- --></strong>): <!-- --><a href="https://next-auth.js.org/getting-started/rest-api">https://next-auth.js.org/getting-started/rest-api<!-- --></a>.<!-- --></em></sup>
<!-- --><sup><em>Other providers overview: <!-- --><a href="https://next-auth.js.org/providers/">https://next-auth.js.org/providers/<!-- --></a></em></sup></p>
<!-- --></li>
<!-- --></ul>
<!-- --><h4>Next:<!-- --></h4>
<!-- --><ul>
<!-- --><li>
<!-- --><p>&#x27;getServerSideProps()&#x27; fetches data from server on each request. Needed for &#x27;profile.js&#x27; page, since it needs to verify if the user is authorized. It also redirects the user from &#x27;profile.js&#x27; to &#x27;auth.js&#x27; if the user is not authorized, thus keeping &#x27;profile.js&#x27; only visible to authorized users.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;useRouter()&#x27; for redirects. (e.g.: after login/logout &#x27;router.replace(&#x27;/&#x27;)&#x27;).<!-- --></p>
<!-- --></li>
<!-- --></ul>
<!-- --><h4>React:<!-- --></h4>
<!-- --><ul>
<!-- --><li>
<!-- --><p>&#x27;useRef()&#x27; for capturing input in forms (e.g.: e-mail, password, etc.)<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;useState()&#x27; for setting and using state (e.g.: loading, error messages, request status like &#x27;pending/success/error&#x27;)<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;useEffect()&#x27; for setting timeout (e.g.: notification); check for session/authentication &#x27;auth.js&#x27;<!-- --></p>
<!-- --></li>
<!-- --></ul>
<!-- --><h4>Others:<!-- --></h4>
<!-- --><ul>
<!-- --><li>
<!-- --><p>&#x27;bcryptjs&#x27; used for hashing and comparing passwords.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;MongoClient&#x27; for database connection.<!-- --></p>
<!-- --></li>
<!-- --></ul>
<!-- --><h4>HTTP requests sent using &#x27;fetch&#x27;:<!-- --></h4>
<!-- --><ul>
<!-- --><li>
<!-- --><p>&#x27;POST&#x27; to send login data.<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>&#x27;PATCH&#x27; to change password.<!-- --></p>
<!-- --></li>
<!-- --></ul>
<!-- --><h4>Observations/Improvements:<!-- --></h4>
<!-- --><ul>
<!-- --><li>&#x27;getStaticProps()&#x27; could be implemented for additional content like a list of products and &#x27;getStaticPaths()&#x27; for accounting for dynamic pages with e.g. PDP (product detail pages). This would be outside of the scope of this &#x27;next-auth&#x27; project though.<!-- --></li>
<!-- --></ul>
<!-- --><h4>Misc:<!-- --></h4>
<!-- --><p>Setting an &#x27;input&#x27; &#x27;type&#x27; from &#x27;&quot;password&quot;&#x27; to &#x27;&quot;text&quot;&#x27; shows the typed in password.<!-- --></p>
<!-- --><h5>&#x27;getServerSideProps()&#x27; &#x27;redirect&#x27;<!-- --></h5>
<!-- --><p>Only redirects after reloading the page or explicitly typing the URL. Thus the need to define the redirect in the component to redirect it automatically after login.<!-- --></p>
<!-- --><p>&#x27;getServerSideProps()&#x27; example! on &#x27;auth.js&#x27; page, in an attempt to redirect to &#x27;profile.js&#x27; page after logging in. Doesn&#x27;t work.<!-- --></p></div></div></div><footer class="footer_footer__zsYAi"><div class="footer_socialMedia__hzLZE"><a href="https://github.com/renebitter" target="_blank" rel="noreferrer"><i class="fab fa-github"></i></a><a href="https://www.linkedin.com/in/rene-bitter/" target="_blank" rel="noreferrer"><i class="fab fa-linkedin"></i></a></div><div>Â© Rene Bitter</div><small>Icons used from<!-- --> <!-- --><a href="https://www.flaticon.com/" target="_blank" rel="noreferrer">Flaticon</a> <!-- -->&amp;<!-- --> <!-- --><a href="https://fontawesome.com/" target="_blank" rel="noreferrer">Font Awesome</a></small></footer></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"project":{"slug":"nextjs-auth","title":"Next.js Authentication","tech":["React","Next.js"],"description":"Next.js project using next-auth library and JWT to handle authentication.","liveLink":"https://nextjs-authentication-eight.vercel.app/","githubLink":"https://github.com/renebitter/nextjs-authentication","image":"nextjs-auth.png","isFeatured":false,"content":"\n## Description\n\nProject built using next-auth library to handle authentication.\n\n- SessionProvider\n- useSession\n- getSession\n- CredentialsProvider\n- JWT \u0026 bcryptjs (for password hashing)\n- Mongodb\n- HTTP requests sent using fetch\n\n### Next-auth:\n\n- 'SessionProvider'\n  Contains the 'session context' and is exposed at the top level of the application '\\_app.js'.\n  'SessionProvider session={pageProps.session}' This will skip the 'session http request' on 'profile.js' since it's provided by 'getServerSideProps(context)' on 'profile.js'.\n  'auth.js' will send this 'session http request' since it does not have a 'getServerSideProps(context)'.\n\n- 'useSession()'\n  Frontend - Add React Hook. Checks if someone is signed in. Used in 'main-navigation.js' component.\n\n- 'getSession()'\n  Backend - Used to protect the API Route.\n\n- 'CredentialsProvider'\n  Manages token creation behind the scenes, 'JWT' (JSON Web Token), used in '/api/auth/[...nextauth]'.\n  Needs to be a 'catch all route' because 'next-auth' exposes multiple routes for login, logout and others more.\n\n  \u003csup\u003e_List of 'next-auth' exposed routes (**that should not be overwritten by your custom ones**): [https://next-auth.js.org/getting-started/rest-api](https://next-auth.js.org/getting-started/rest-api)._\u003c/sup\u003e\n  \u003csup\u003e_Other providers overview: [https://next-auth.js.org/providers/](https://next-auth.js.org/providers/)_\u003c/sup\u003e\n\n#### Next:\n\n- 'getServerSideProps()' fetches data from server on each request. Needed for 'profile.js' page, since it needs to verify if the user is authorized. It also redirects the user from 'profile.js' to 'auth.js' if the user is not authorized, thus keeping 'profile.js' only visible to authorized users.\n\n- 'useRouter()' for redirects. (e.g.: after login/logout 'router.replace('/')').\n\n#### React:\n\n- 'useRef()' for capturing input in forms (e.g.: e-mail, password, etc.)\n\n- 'useState()' for setting and using state (e.g.: loading, error messages, request status like 'pending/success/error')\n\n- 'useEffect()' for setting timeout (e.g.: notification); check for session/authentication 'auth.js'\n\n#### Others:\n\n- 'bcryptjs' used for hashing and comparing passwords.\n\n- 'MongoClient' for database connection.\n\n#### HTTP requests sent using 'fetch':\n\n- 'POST' to send login data.\n\n- 'PATCH' to change password.\n\n#### Observations/Improvements:\n\n- 'getStaticProps()' could be implemented for additional content like a list of products and 'getStaticPaths()' for accounting for dynamic pages with e.g. PDP (product detail pages). This would be outside of the scope of this 'next-auth' project though.\n\n#### Misc:\n\nSetting an 'input' 'type' from '\"password\"' to '\"text\"' shows the typed in password.\n\n##### 'getServerSideProps()' 'redirect'\n\nOnly redirects after reloading the page or explicitly typing the URL. Thus the need to define the redirect in the component to redirect it automatically after login.\n\n'getServerSideProps()' example! on 'auth.js' page, in an attempt to redirect to 'profile.js' page after logging in. Doesn't work.\n"}},"__N_SSG":true},"page":"/projects/[slug]","query":{"slug":"nextjs-auth"},"buildId":"hbUhD9yAYEdJSnufkLk56","assetPrefix":"/portfolio","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>